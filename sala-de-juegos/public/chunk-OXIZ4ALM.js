import{a as L}from"./chunk-NTEOFLDB.js";import{a as J}from"./chunk-6PXDWWVM.js";import{a as y}from"./chunk-3K5F4FNC.js";import{k as E,l as k}from"./chunk-EONISGLO.js";import"./chunk-5YNXMIIZ.js";import"./chunk-E4ERW3Q5.js";import{a as D,b as U}from"./chunk-G24662RJ.js";import{$a as M,Cb as C,Cc as P,Dc as S,Eb as p,Fb as u,Hc as I,Pa as s,Qb as w,Sb as o,Tb as c,Ub as O,_ as h,cc as A,da as _,db as x,ea as v,na as l,sb as d,tb as i,ub as r}from"./chunk-TXKU6S6B.js";import{g as F,j as f}from"./chunk-4ZZIO3ZI.js";var b=F(J());function N(n,t){if(n&1){let a=C();i(0,"button",10),p("click",function(){let g=_(a).$implicit,T=u();return v(T.acertarLetra(g))}),o(1),r()}if(n&2){let a=t.$implicit,e=u();w("ok",e.letrasOK.has(a))("fail",e.letrasFALLIDAS.has(a)),d("disabled",e.letrasUsadas.has(a))("disabled",e.letrasUsadas.has(a)),s(),c(a)}}function j(n,t){n&1&&(i(0,"p",11),o(1,"\xA1Ganaste! \xA1Felicitaciones! \u{1F389}"),r())}function G(n,t){if(n&1&&(i(0,"p",11),o(1,"\xA1Perdiste! La palabra correcta era "),i(2,"b"),o(3),r(),o(4,"."),r()),n&2){let a=u();s(3),c(a.palabraCorrecta())}}var m=["ARCADE","JUEGOS","ESTRATEGIA","RETRO","MOVILIDAD","DIVERSION"],R=class n{results=h(L);auth=h(y);abecedario="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");letrasUsadas=new Set;letrasOK=new Set;letrasFALLIDAS=new Set;partidaIniciada=l(!1);palabraCorrecta=l(m[Math.floor(Math.random()*m.length)]);letraUsada=l([]);errores=l(0);maximoErrores=5;masked=A(()=>this.palabraCorrecta().split("").map(t=>this.letraUsada().includes(t)?t:"_").join(" "));get estadoJuego(){return this.masked().includes("_")?this.errores()>=this.maximoErrores?"perdio":"jugando":"gano"}calcularPuntaje(){let t=this.maximoErrores-this.errores();return Math.max(0,Math.round(t*100/this.maximoErrores))}acertarLetra(t){if(this.letrasUsadas.has(t)||this.estadoJuego!=="jugando")return;this.partidaIniciada.set(!0),this.letrasUsadas.add(t),this.palabraCorrecta().includes(t)?(this.letrasOK.add(t),this.letraUsada.update(e=>[...e,t])):(this.letrasFALLIDAS.add(t),this.palabraCorrecta().includes(t)||this.errores.update(e=>e+1))}reiniciarJuego(){this.palabraCorrecta.set(m[Math.floor(Math.random()*m.length)]),this.letraUsada.set([]),this.errores.set(0),this.partidaIniciada.set(!1),this.letrasUsadas.clear(),this.letrasOK.clear(),this.letrasFALLIDAS.clear()}guardarJuego(){return f(this,null,function*(){if(!this.partidaIniciada())return;let t=yield this.auth.getUsuarioActual();if(!t)return;let a=this.calcularPuntaje();try{yield this.results.guardarResultado({ID_USUARIO:t.id,JUEGO:"Ahorcado",PUNTAJE:a,TIEMPO_PARTIDA:0,GANO:this.estadoJuego==="gano"}),b.default.fire({icon:"success",title:"\xA1Listo!",text:"Sus resultados han sido guardados con \xE9xito.",customClass:{popup:"swal-cold-popup",title:"swal-cold-title",confirmButton:"swal-cold-btn"},buttonsStyling:!1})}catch{b.default.fire({icon:"error",title:"Error al guardar los resultados",text:"Por favor, intente nuevamente.",customClass:{popup:"swal-cold-popup",title:"swal-cold-title",confirmButton:"swal-cold-btn"},buttonsStyling:!1})}})}static \u0275fac=function(a){return new(a||n)};static \u0275cmp=M({type:n,selectors:[["ng-component"]],decls:20,vars:7,consts:[["appearance","outlined",1,"ahorcado-card","split","ahorcado-card-shadow-m","ahorcado-card--hover"],[1,"ahorcado-div"],[1,"estado"],[1,"palabra"],[1,"letras"],["class","letra","mat-raised-button","",3,"disabled","ok","fail","click",4,"ngFor","ngForOf"],[1,"acciones"],["mat-flat-button","",1,"reiniciar-button",3,"click"],["mat-raised-button","",1,"guardar-resultados-button",3,"click","disabled"],["class","resultado",4,"ngIf"],["mat-raised-button","",1,"letra",3,"click","disabled"],[1,"resultado"]],template:function(a,e){a&1&&(i(0,"mat-card",0)(1,"div",1)(2,"h1"),o(3,"Ahorcado"),r(),i(4,"div",2),o(5,"Errores: "),i(6,"b"),o(7),r(),o(8),r(),i(9,"div",3),o(10),r(),i(11,"div",4),x(12,N,2,7,"button",5),r(),i(13,"div",6)(14,"button",7),p("click",function(){return e.reiniciarJuego()}),o(15,"Reiniciar"),r(),i(16,"button",8),p("click",function(){return e.guardarJuego()}),o(17,"Guardar Resultado"),r()(),x(18,j,2,0,"p",9)(19,G,5,1,"p",9),r()()),a&2&&(s(7),c(e.errores()),s(),O(" / ",e.maximoErrores),s(2),c(e.masked()),s(2),d("ngForOf","ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")),s(4),d("disabled",!e.partidaIniciada()),s(2),d("ngIf",e.estadoJuego==="gano"),s(),d("ngIf",e.estadoJuego==="perdio"))},dependencies:[I,P,S,U,D,k,E],styles:["[_nghost-%COMP%]{align-self:start;justify-self:center;width:100%}.ahorcado-card[_ngcontent-%COMP%]{height:460px!important;width:min(96vw,1000px)!important;margin:0 auto;box-sizing:border-box;background:#101424db;border:1px solid rgba(130,160,255,.15);transition:box-shadow .2s ease,transform .2s ease}.ahorcado-card.split[_ngcontent-%COMP%]{width:min(96vw,1000px);margin:0 auto;padding:0;overflow:hidden;box-sizing:border-box;border-radius:20px}.ahorcado-card--hover[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 16px 40px #0000006b,0 6px 18px #00000047,0 0 0 1px #00000038}.ahorcado-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:14px;padding:28px;text-align:center}h1[_ngcontent-%COMP%]{margin:0 0 8px;color:var(--color-secondary)}.estado[_ngcontent-%COMP%]{font-size:18px;opacity:.9}.palabra[_ngcontent-%COMP%]{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;letter-spacing:10px;font-weight:600;font-size:clamp(20px,3.2vw,26px);margin-top:6px}.letras[_ngcontent-%COMP%]{width:100%;max-width:780px;display:grid;grid-template-columns:repeat(auto-fit,minmax(54px,1fr));gap:10px;margin-top:8px}.letra[_ngcontent-%COMP%]{width:100%;min-width:0;font-size:20px;font-weight:700;border-radius:999px;color:var(--texto-secundario)!important;background-color:var(--color-light-violet)!important}.letra[disabled][_ngcontent-%COMP%]{opacity:.55;filter:saturate(.7)}.acciones[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:8px;gap:12px}.acciones[_ngcontent-%COMP%]   .reiniciar-button[_ngcontent-%COMP%], .acciones[_ngcontent-%COMP%]   .guardar-resultados-button[_ngcontent-%COMP%]{width:220px;max-width:100%}.reiniciar-button[_ngcontent-%COMP%]{color:var(--texto-principal)!important;background:var(--color-primary)!important;box-shadow:0 6px 14px #007daf33;transition:box-shadow .2s ease,transform .15s ease,filter .2s ease}.reiniciar-button[_ngcontent-%COMP%]:hover, .reiniciar-button[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 3px #007daf47,0 10px 26px #007daf52;filter:brightness(1.04);transform:translateY(-1px);outline:none}.reiniciar-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 0 0 2px #007daf40,0 6px 18px #007daf47}.guardar-resultados-button[_ngcontent-%COMP%]{color:var(--color-white)!important;background-color:var(--color-secondary)!important;box-shadow:0 6px 14px rgba(var(--color-pink-rgb)/.2);transition:box-shadow .2s ease,transform .15s ease,filter .2s ease;--border-radius: 9999px}.guardar-resultados-button[_ngcontent-%COMP%]:hover, .guardar-resultados-button[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 3px rgba(var(--color-pink-rgb)/.28),0 10px 26px rgba(var(--color-pink-rgb)/.32);filter:brightness(1.04);transform:translateY(-1px);outline:none}.guardar-resultados-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 0 0 2px rgba(var(--color-pink-rgb)/.22),0 6px 18px rgba(var(--color-pink-rgb)/.28)}.resultado[_ngcontent-%COMP%]{margin:6px 0 0;font-size:18px}"]})};export{R as Ahorcado};
