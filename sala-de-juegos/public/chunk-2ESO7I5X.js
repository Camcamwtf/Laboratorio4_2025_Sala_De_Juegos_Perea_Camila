import{a as A,b as g,d as D,e as q,g as U,h as Y,i as j,j as G,k as Q,l as K,m as W,n as X,o as Z,r as $,s as tt,x as et,y as it}from"./chunk-IU22B5W6.js";import{a as N,b as T}from"./chunk-BKROMZOD.js";import{b as V}from"./chunk-UW44YGR2.js";import"./chunk-L645W6BM.js";import{a as rt}from"./chunk-6PXDWWVM.js";import{a as z}from"./chunk-3K5F4FNC.js";import{i as B,k as L,l as F}from"./chunk-EONISGLO.js";import"./chunk-5YNXMIIZ.js";import"./chunk-E4ERW3Q5.js";import{a as H,b as J}from"./chunk-G24662RJ.js";import{$a as S,Cb as v,Dc as R,Eb as u,Fb as x,Hc as I,Jb as P,Kb as k,Lb as E,Pa as l,Sb as r,Tb as _,Ub as M,_ as h,da as m,db as b,ea as d,na as O,nb as w,sb as c,tb as e,ub as i,vb as f}from"./chunk-TXKU6S6B.js";import{g as nt,j as C}from"./chunk-4ZZIO3ZI.js";var p=nt(rt());var at=["loginBtn"];function lt(s,o){s&1&&(e(0,"mat-form-field",7)(1,"mat-label"),r(2,"Nombre"),i(),e(3,"mat-icon",8),r(4,"person"),i(),f(5,"input",19),i())}function st(s,o){s&1&&(e(0,"mat-hint",22),r(1,"Las contrase\xF1as no coinciden"),i())}function ct(s,o){if(s&1){let n=v();e(0,"mat-form-field",7)(1,"mat-icon",8),r(2,"lock"),i(),e(3,"mat-label"),r(4,"Confirmar contrase\xF1a"),i(),f(5,"input",20),e(6,"button",11),u("click",function(){m(n);let a=x();return d(a.mostrarClave2=!a.mostrarClave2)}),e(7,"mat-icon",12),r(8),i()(),b(9,st,2,0,"mat-hint",21),i()}if(s&2){let n=x();l(5),c("type",n.mostrarClave2?"text":"password"),l(),w("aria-label","Mostrar/Ocultar contrase\xF1a"),l(2),_(n.mostrarClave2?"visibility_off":"visibility"),l(),c("ngIf",n.form.hasError("passwordMismatch"))}}function pt(s,o){s&1&&(e(0,"p",23),r(1,"Tambi\xE9n pod\xE9s acceder como..."),i())}function mt(s,o){if(s&1){let n=v();e(0,"div",24)(1,"button",25),u("click",function(){m(n);let a=x();return d(a.loginRapido("admin@example.com","admin123"))}),e(2,"mat-icon",26),r(3,"verified_user"),i(),e(4,"span",27),r(5,"ADMIN"),i()(),e(6,"button",25),u("click",function(){m(n);let a=x();return d(a.loginRapido("user@example.com","user123"))}),e(7,"mat-icon",26),r(8,"accessibility"),i(),e(9,"span",27),r(10,"USUARIO"),i()()()}}var ot=class s{fb=h(G);auth=h(z);router=h(V);loginBtn;isRegister=O(!1);mostrarClave1=!1;mostrarClave2=!1;esLogueoRapido=!1;form=this.fb.group({nombre:[""],email:["",[g.required,g.email]],password:["",[g.required,g.minLength(6)]],passwordConfirm:[""]},{validators:this.sonClavesIguales()});constructor(){this.aplicarValidaciones()}toggleMode(){this.isRegister.update(o=>!o),this.aplicarValidaciones()}sonClavesIguales(){return o=>{let n=this.isRegister(),t=o.get("password")?.value,a=o.get("passwordConfirm")?.value;return n&&t&&a&&t!==a?{passwordMismatch:!0}:null}}aplicarValidaciones(){let o=this.form.controls.nombre;this.isRegister()?o.setValidators([g.required,g.minLength(2)]):(o.clearValidators(),o.setValue(o.value??"")),o.updateValueAndValidity({emitEvent:!1})}loginRapido(o,n){return C(this,null,function*(){if(!this.esLogueoRapido){this.esLogueoRapido=!0;try{yield this.auth.login(o,n),p.default.fire({position:"top-end",icon:"success",title:"\xA1Bienvenido a la Sala de Juegos!",showConfirmButton:!1,timer:1800,customClass:{popup:"swal-cold-popup",title:"swal-cold-title",confirmButton:"swal-cold-btn"},buttonsStyling:!1}),this.router.navigateByUrl("/home")}catch(t){p.default.fire({position:"top-end",icon:"error",title:"No se pudo iniciar sesi\xF3n",text:t?.message||"Revis\xE1 las credenciales.",showConfirmButton:!0,customClass:{popup:"swal-cold-popup",title:"swal-cold-title",confirmButton:"swal-cold-btn"},buttonsStyling:!1})}finally{this.esLogueoRapido=!1}}})}onSubmit(){return C(this,null,function*(){if(this.form.invalid){p.default.fire({position:"top-end",icon:"error",title:"Correo electr\xF3nico y/o contrase\xF1a inv\xE1lidos.",showConfirmButton:!1,timer:2e3,customClass:{popup:"swal-cold-popup",title:"swal-cold-title",confirmButton:"swal-cold-btn"},buttonsStyling:!1});return}let{email:o,password:n,nombre:t}=this.form.getRawValue();try{if(this.isRegister()){yield this.auth.register(o,n,t);try{yield this.auth.login(o,n),p.default.fire({position:"top-end",icon:"success",title:"\xA1Cuenta creada y sesi\xF3n iniciada!",showConfirmButton:!1,timer:1800,customClass:{popup:"swal-cold-popup",title:"swal-cold-title",confirmButton:"swal-cold-btn"},buttonsStyling:!1}),this.router.navigateByUrl("/home");return}catch{p.default.fire({icon:"info",title:"\xA1Cuenta creada!",text:"Revis\xE1 tu correo para confirmar la cuenta y poder iniciar sesi\xF3n.",confirmButtonText:"OK",customClass:{popup:"swal-cold-popup",title:"swal-cold-title",confirmButton:"swal-cold-btn"},buttonsStyling:!1}),this.isRegister.set(!1),this.aplicarValidaciones();return}}else yield this.auth.login(o,n),p.default.fire({position:"top-end",icon:"success",title:"\xA1Bienvenido a la Sala de Juegos!",showConfirmButton:!1,timer:2e3,customClass:{popup:"swal-cold-popup",title:"swal-cold-title",confirmButton:"swal-cold-btn"},buttonsStyling:!1}),this.router.navigateByUrl("/home")}catch{p.default.fire({position:"top-end",icon:"error",title:"\xA1Error al iniciar sesi\xF3n o registrarse!",text:"Correo electr\xF3nico y/o contrase\xF1a inv\xE1lidos.",confirmButtonText:"OK",customClass:{popup:"swal-cold-popup",title:"swal-cold-title",confirmButton:"swal-cold-btn"},buttonsStyling:!1})}})}static \u0275fac=function(n){return new(n||s)};static \u0275cmp=S({type:s,selectors:[["app-login"]],viewQuery:function(n,t){if(n&1&&P(at,5),n&2){let a;k(a=E())&&(t.loginBtn=a.first)}},decls:33,vars:12,consts:[["loginBtn",""],[1,"login-container","fade-in"],["appearance","outlined",1,"login-card","split","login-card--shadow-m","login-card--hover"],[1,"login-div"],[1,"div-izquierdo"],[1,"login-form",3,"ngSubmit","formGroup"],["class","login-field","appearance","outline",4,"ngIf"],["appearance","outline",1,"login-field"],["matPrefix",""],["matInput","","formControlName","email","type","email","autocomplete","email"],["matInput","","formControlName","password","autocomplete","current-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",1,"toggle-pass-btn",3,"click"],[1,"ojo-icono"],["mat-raised-button","","type","submit",1,"login-ingresar-btn"],["mat-button","","type","button",1,"link-btn",3,"click","disableRipple"],["class","acceso-rapido-label",4,"ngIf"],["class","acceso-rapido",4,"ngIf"],[1,"div-derecho"],["src","assets/arcade.png","alt","Arcade retro"],["matInput","","formControlName","nombre","type","text","autocomplete","name"],["matInput","","formControlName","passwordConfirm","autocomplete","new-password",3,"type"],["class","field-error",4,"ngIf"],[1,"field-error"],[1,"acceso-rapido-label"],[1,"acceso-rapido"],["mat-stroked-button","","type","button",1,"acceso-rapido-button",3,"click"],[1,"acceso-rapido-icon"],[1,"acceso-rapido-label-text"]],template:function(n,t){if(n&1){let a=v();e(0,"div",1)(1,"mat-card",2)(2,"div",3)(3,"div",4)(4,"h2"),r(5),i(),e(6,"form",5),u("ngSubmit",function(){return m(a),d(t.onSubmit())}),b(7,lt,6,0,"mat-form-field",6),e(8,"mat-form-field",7)(9,"mat-label"),r(10,"Correo electr\xF3nico"),i(),e(11,"mat-icon",8),r(12,"mail"),i(),f(13,"input",9),i(),e(14,"mat-form-field",7)(15,"mat-icon",8),r(16,"lock"),i(),e(17,"mat-label"),r(18,"Contrase\xF1a"),i(),f(19,"input",10),e(20,"button",11),u("click",function(){return m(a),d(t.mostrarClave1=!t.mostrarClave1)}),e(21,"mat-icon",12),r(22),i()()(),b(23,ct,10,4,"mat-form-field",6),e(24,"button",13,0),r(26),i(),e(27,"button",14),u("click",function(){return m(a),d(t.toggleMode())}),r(28),i(),b(29,pt,2,0,"p",15)(30,mt,11,0,"div",16),i()(),e(31,"div",17),f(32,"img",18),i()()()()}n&2&&(l(5),_(t.isRegister()?"Crear cuenta":"Iniciar sesi\xF3n"),l(),c("formGroup",t.form),l(),c("ngIf",t.isRegister()),l(12),c("type",t.mostrarClave1?"text":"password"),l(),w("aria-label","Mostrar/Ocultar contrase\xF1a"),l(2),_(t.mostrarClave1?"visibility_off":"visibility"),l(),c("ngIf",t.isRegister()),l(3),M(" ",t.isRegister()?"REGISTRARME":"ACCEDER"," "),l(),c("disableRipple",!0),l(),M(" ",t.isRegister()?"\xBFYa tienes cuenta? Ingres\xE1":"\xBFNo tienes cuenta? Reg\xEDstrate"," "),l(),c("ngIf",!t.isRegister()),l(),c("ngIf",!t.isRegister()))},dependencies:[I,R,Q,U,A,D,q,Y,j,J,H,tt,$,K,W,X,Z,it,et,F,L,B,T,N],styles:['.login-container[_ngcontent-%COMP%]{display:grid;min-height:calc(100dvh - var(--toolbar-h, 64px));place-items:center;padding:16px}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .18s ease-out both}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}.login-card[_ngcontent-%COMP%]{height:560px!important;width:min(92vw,1200px)!important;margin:0 auto;box-sizing:border-box;background:#101424db;border:1px solid rgba(130,160,255,.15);transition:box-shadow .2s ease,transform .2s ease}.login-card.split[_ngcontent-%COMP%]{width:min(96vw,960px);margin:0 auto;padding:0;overflow:hidden;box-sizing:border-box;border-radius:20px}.login-card--hover[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 16px 40px #0000006b,0 6px 18px #00000047,0 0 0 1px #00000038}.login-div[_ngcontent-%COMP%]{display:grid;min-height:520px;height:600px!important;grid-template-columns:1fr 1fr;align-items:stretch}.div-izquierdo[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:24px 32px}.div-izquierdo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;color:var(--color-secondary)}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px}.login-field[_ngcontent-%COMP%]{width:100%}.field-error[_ngcontent-%COMP%]{color:var(--color-danger)}[_nghost-%COMP%]     .mat-mdc-form-field-subscript-wrapper{min-height:0}[_nghost-%COMP%]     .mat-mdc-form-field-infix{padding-top:10px;padding-bottom:10px}[_nghost-%COMP%]     .mat-mdc-form-field{margin:0}[_nghost-%COMP%]     .toggle-pass-btn.mat-mdc-icon-button{margin-right:8px}.ojo-icono[_ngcontent-%COMP%]{font-size:22px}.login-ingresar-btn[_ngcontent-%COMP%]{width:100%;max-width:560px;font-weight:700;color:var(--texto-principal)!important;background-color:var(--color-secondary)!important;box-shadow:0 6px 14px rgba(var(--color-pink-rgb)/.2);transition:box-shadow .2s ease,transform .15s ease,filter .2s ease;--border-radius: 9999px}.login-ingresar-btn[_ngcontent-%COMP%]:hover, .login-ingresar-btn[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 3px rgba(var(--color-pink-rgb)/.28),0 10px 26px rgba(var(--color-pink-rgb)/.32);filter:brightness(1.04);transform:translateY(-1px);outline:none}.login-ingresar-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 0 0 2px rgba(var(--color-pink-rgb)/.22),0 6px 18px rgba(var(--color-pink-rgb)/.28)}.link-btn[_ngcontent-%COMP%]{min-width:0;height:auto;padding:0;margin-top:12px;font-size:16px;line-height:1.25;box-shadow:none;text-transform:none;text-decoration:underline;text-underline-offset:2px;background:transparent!important;color:var(--color-light-violet)!important;cursor:pointer}.link-btn[_ngcontent-%COMP%]:hover{text-decoration-thickness:2px}.link-btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid currentColor;outline-offset:2px}button.login-field[_ngcontent-%COMP%]{align-self:stretch}.acceso-rapido-label[_ngcontent-%COMP%]{margin-top:32px}.acceso-rapido[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(240px,1fr));gap:12px}.acceso-rapido-button[_ngcontent-%COMP%]{width:100%;min-width:0;padding-left:32px;font-weight:700;color:var(--texto-principal)!important;background-color:var(--color-secondary)!important;overflow:visible;box-shadow:0 6px 14px rgba(var(--color-pink-rgb)/.2);transition:box-shadow .2s ease,transform .15s ease,filter .2s ease;--border-radius: 9999px}.acceso-rapido-button[_ngcontent-%COMP%]:hover, .acceso-rapido-button[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 3px rgba(var(--color-pink-rgb)/.28),0 10px 26px rgba(var(--color-pink-rgb)/.32);filter:brightness(1.04);transform:translateY(-1px);outline:none}.acceso-rapido-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 0 0 2px rgba(var(--color-pink-rgb)/.22),0 6px 18px rgba(var(--color-pink-rgb)/.28)}[_nghost-%COMP%]     .acceso-rapido-button .mdc-button__label{display:inline-flex;align-items:center;justify-content:center;line-height:1;width:100%;overflow:visible;gap:8px}[_nghost-%COMP%]     .acceso-rapido-button.mat-mdc-stroked-button{min-height:56px;--mdc-filled-button-container-height: 56px;--mdc-text-button-container-height: 56px}.acceso-rapido-icon[_ngcontent-%COMP%]{display:inline-block;font-size:32px;width:32px;height:32px;line-height:1;color:var(--color-violet)}[_nghost-%COMP%]     .acceso-rapido-button .mat-icon.acceso-rapido-icon{font-size:32px!important;width:32px!important;height:32px!important;line-height:1!important;display:inline-block}.acceso-rapido-label-text[_ngcontent-%COMP%]{white-space:nowrap;font-size:14px}.div-derecho[_ngcontent-%COMP%]{position:relative}.div-derecho[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;position:absolute;width:100%;height:100%;inset:0;object-fit:cover;border-radius:0 12px 12px 0;filter:contrast(1.05) saturate(1.05)}.div-derecho[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;border-radius:0 12px 12px 0;background:linear-gradient(135deg,#00000040,#0000001a);pointer-events:none}mat-label[_ngcontent-%COMP%]{color:#e0e0e0}']})};export{ot as Login};
