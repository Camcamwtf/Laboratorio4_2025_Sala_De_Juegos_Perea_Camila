import{a as Y}from"./chunk-NTEOFLDB.js";import{a as H}from"./chunk-6PXDWWVM.js";import{a as V}from"./chunk-3K5F4FNC.js";import{k as U,l as j}from"./chunk-EONISGLO.js";import"./chunk-5YNXMIIZ.js";import"./chunk-E4ERW3Q5.js";import{a as F,b as J}from"./chunk-G24662RJ.js";import{$a as E,$b as B,Ab as z,Cb as C,Cc as N,Dc as D,Eb as f,Fb as d,Hc as R,Na as I,Pa as r,Pb as A,Sb as i,Tb as h,Ub as g,V as y,_ as u,cc as T,da as m,db as v,ea as x,na as b,sb as p,tb as s,ub as o,vb as S,zb as k}from"./chunk-TXKU6S6B.js";import{a as w,b as M,g as Z,j as O}from"./chunk-4ZZIO3ZI.js";var Q=(e,n=80)=>`https://flagcdn.com/w${n}/${e.toLowerCase()}.png`,W=[{label:"Argentina",code:"ar"},{label:"Brasil",code:"br"},{label:"Chile",code:"cl"},{label:"Espa\xF1a",code:"es"},{label:"Italia",code:"it"},{label:"Jap\xF3n",code:"jp"},{label:"Alemania",code:"de"},{label:"Francia",code:"fr"},{label:"Colombia",code:"co"},{label:"M\xE9xico",code:"mx"},{label:"Uruguay",code:"uy"},{label:"Per\xFA",code:"pe"},{label:"Portugal",code:"pt"},{label:"Reino Unido",code:"gb"},{label:"Canad\xE1",code:"ca"},{label:"Estados Unidos",code:"us"},{label:"Australia",code:"au"},{label:"Nueva Zelanda",code:"nz"}],_=class e{withImg(n,t=80){return n.map(a=>M(w({},a),{img:Q(a.code,t)}))}getPreguntasRandom(n=5){let t=[...W].sort(()=>Math.random()-.5),a=[];for(let c=0;c<Math.min(n,t.length);c++){let l=t[c],q=t.filter(L=>L.code!==l.code).sort(()=>Math.random()-.5).slice(0,3),G=this.withImg([l,...q]).sort(()=>Math.random()-.5);a.push({q:`\xBFCu\xE1l es la bandera de ${l.label}?`,opciones:G,correctaCode:l.code})}return a}static \u0275fac=function(t){return new(t||e)};static \u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"})};var P=Z(H());function X(e,n){if(e&1&&(s(0,"div",5),i(1,"Pregunta "),s(2,"b"),i(3),o(),i(4),o()),e&2){let t=d();r(3),h(t.index()+1),r(),g(" / ",t.preguntas.length)}}function tt(e,n){if(e&1){let t=C();s(0,"button",10),f("click",function(){let c=m(t).$implicit,l=d(2);return x(l.seleccionarOpcion(c.code))}),S(1,"img",11),o()}if(e&2){let t=n.$implicit;r(),p("src",t.img,I)("alt","Bandera de "+t.label)}}function et(e,n){if(e&1&&(k(0),s(1,"div",6)(2,"b"),i(3),o(),i(4),o(),s(5,"div",7),v(6,tt,2,2,"button",8),o(),s(7,"div",9),i(8,"Correctas: "),s(9,"b"),i(10),o()(),z()),e&2){let t=d();r(3),g("",t.index()+1,"."),r(),g(" ",t.preguntas[t.index()].q," "),r(2),p("ngForOf",t.preguntas[t.index()].opciones),r(4),h(t.respuestaCorrecta())}}function nt(e,n){if(e&1){let t=C();s(0,"div",12),i(1," \xA1Listo! Correctas: "),s(2,"b"),i(3),o(),i(4),o(),s(5,"div",13)(6,"button",14),f("click",function(){m(t);let c=d();return x(c.reiniciarJuego())}),i(7,"Reiniciar"),o(),s(8,"button",15),f("click",function(){m(t);let c=d();return x(c.guardarJuego())}),i(9,"Guardar Resultado"),o()()}if(e&2){let t=d();r(3),h(t.respuestaCorrecta()),r(),g(" / ",t.preguntas.length," "),r(4),p("disabled",!t.partidaIniciada())}}var $=class e{results=u(Y);auth=u(V);banderas=u(_);preguntas=this.banderas.getPreguntasRandom(7);index=b(0);respuestaCorrecta=b(0);partidaIniciada=b(!1);finalizado=T(()=>this.index()>=this.preguntas.length);seleccionarOpcion(n){if(this.finalizado())return;this.partidaIniciada.set(!0);let t=this.preguntas[this.index()];t&&(n===t.correctaCode&&this.respuestaCorrecta.update(a=>a+1),this.index.update(a=>a+1))}reiniciarJuego(){this.index.set(0),this.respuestaCorrecta.set(0),this.partidaIniciada.set(!1),this.preguntas=this.banderas.getPreguntasRandom(10)}guardarJuego(){return O(this,null,function*(){if(!this.partidaIniciada())return;let n=(yield this.auth.getUsuarioActual?.())||(yield this.auth.getUsuarioActual());if(n)try{yield this.results.guardarResultado({ID_USUARIO:n.id,JUEGO:"Preguntados",PUNTAJE:this.respuestaCorrecta()*10,TIEMPO_PARTIDA:0,GANO:this.respuestaCorrecta()===this.preguntas.length}),P.default.fire({icon:"success",title:"\xA1Listo!",text:"Sus resultados han sido guardados con \xE9xito.",customClass:{popup:"swal-cold-popup",title:"swal-cold-title",confirmButton:"swal-cold-btn"},buttonsStyling:!1})}catch{P.default.fire({icon:"error",title:"Error al guardar los resultados",text:"Por favor, intente nuevamente.",customClass:{popup:"swal-cold-popup",title:"swal-cold-title",confirmButton:"swal-cold-btn"},buttonsStyling:!1})}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=E({type:e,selectors:[["ng-component"]],decls:8,vars:3,consts:[["finTpl",""],["appearance","outlined",1,"preguntados-card","split","preguntados-card-shadow-m","preguntados-card--hover"],[1,"preguntados-div"],["class","estado",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"estado"],[1,"pregunta"],[1,"opciones-grid"],["mat-raised-button","","class","opcion",3,"click",4,"ngFor","ngForOf"],[1,"resultado-parcial"],["mat-raised-button","",1,"opcion",3,"click"],[1,"flag",3,"src","alt"],[1,"resultado-final"],[1,"acciones"],["mat-flat-button","","type","button",1,"reiniciar-button",3,"click"],["mat-raised-button","","type","button",1,"guardar-resultados-button",3,"click","disabled"]],template:function(t,a){if(t&1&&(s(0,"mat-card",1)(1,"div",2)(2,"h1"),i(3,"Preguntados"),o(),v(4,X,5,2,"div",3)(5,et,11,4,"ng-container",4)(6,nt,10,3,"ng-template",null,0,B),o()()),t&2){let c=A(7);r(4),p("ngIf",!a.finalizado()),r(),p("ngIf",!a.finalizado())("ngIfElse",c)}},dependencies:[R,N,D,J,F,j,U],styles:["[_nghost-%COMP%]{align-self:start;justify-self:center;width:100%}.preguntados-card[_ngcontent-%COMP%]{height:460px!important;width:min(96vw,1000px)!important;margin:0 auto;box-sizing:border-box;background:#101424db;border:1px solid rgba(130,160,255,.15);transition:box-shadow .2s ease,transform .2s ease}.preguntados-card.split[_ngcontent-%COMP%]{width:min(96vw,1000px);margin:0 auto;padding:0;overflow:hidden;box-sizing:border-box;border-radius:20px}.preguntados-card--hover[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 16px 40px #0000006b,0 6px 18px #00000047,0 0 0 1px #00000038}.preguntados-div[_ngcontent-%COMP%]{display:grid;padding:28px;grid-auto-rows:min-content;text-align:center;justify-items:center;align-content:center;gap:12px}h1[_ngcontent-%COMP%]{margin:0 0 8px;color:var(--color-secondary)}.estado[_ngcontent-%COMP%]{font-size:18px;opacity:.9}.pregunta[_ngcontent-%COMP%]{font-size:clamp(18px,2.4vw,22px);line-height:1.3;margin-top:2px}.opciones-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(180px,1fr));gap:14px;margin:12px auto;justify-content:center;align-content:center;justify-items:center;max-width:520px}.opcion[_ngcontent-%COMP%]{background:transparent!important;border-radius:16px;aspect-ratio:16/9;width:100%;max-width:200px;padding:0;overflow:hidden;box-shadow:0 8px 20px #00000042;transition:transform .15s ease,box-shadow .2s ease,filter .2s ease}.opcion[_ngcontent-%COMP%]:hover, .opcion[_ngcontent-%COMP%]:focus-visible{transform:translateY(-2px);box-shadow:0 0 0 3px #a89eff47,0 12px 28px #0000005c;outline:none;filter:brightness(1.03)}.opcion[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 0 0 2px #a89eff38,0 8px 20px #0000004d}.opcion[disabled][_ngcontent-%COMP%]{opacity:.7;transform:none;box-shadow:none;filter:saturate(.85)}[_nghost-%COMP%]     .opcion.mdc-button{padding:0!important;min-width:0;width:100%;height:100%}[_nghost-%COMP%]     .opcion .mdc-button__label{display:grid;place-items:center;width:100%;height:100%;box-sizing:border-box}.flag[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:12px;border:1.5px solid rgba(255,255,255,.22);display:block;filter:contrast(1.02) saturate(1.02)}.resultado-parcial[_ngcontent-%COMP%]{margin-top:2px;font-size:16px;opacity:.9}.resultado-final[_ngcontent-%COMP%]{margin-top:10px;font-size:18px}.acciones[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:8px;gap:12px}.acciones[_ngcontent-%COMP%]   .reiniciar-button[_ngcontent-%COMP%], .acciones[_ngcontent-%COMP%]   .guardar-resultados-button[_ngcontent-%COMP%]{width:220px;margin-top:12px;max-width:100%}.reiniciar-button[_ngcontent-%COMP%]{color:var(--texto-principal)!important;background:var(--color-primary)!important;box-shadow:0 6px 14px #007daf33;transition:box-shadow .2s ease,transform .15s ease,filter .2s ease}.reiniciar-button[_ngcontent-%COMP%]:hover, .reiniciar-button[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 3px #007daf47,0 10px 26px #007daf52;filter:brightness(1.04);transform:translateY(-1px);outline:none}.reiniciar-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 0 0 2px #007daf40,0 6px 18px #007daf47}.guardar-resultados-button[_ngcontent-%COMP%]{color:var(--color-white)!important;background-color:var(--color-secondary)!important;box-shadow:0 6px 14px rgba(var(--color-pink-rgb)/.2);transition:box-shadow .2s ease,transform .15s ease,filter .2s ease;--border-radius: 9999px}.guardar-resultados-button[_ngcontent-%COMP%]:hover, .guardar-resultados-button[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 3px rgba(var(--color-pink-rgb)/.28),0 10px 26px rgba(var(--color-pink-rgb)/.32);filter:brightness(1.04);transform:translateY(-1px);outline:none}.guardar-resultados-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 0 0 2px rgba(var(--color-pink-rgb)/.22),0 6px 18px rgba(var(--color-pink-rgb)/.28)}"]})};export{$ as Preguntados};
