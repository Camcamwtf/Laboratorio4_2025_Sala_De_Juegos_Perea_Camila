import{A as z,B as p,Mc as R,Sa as v,Tc as T,V as g,W as m,Y as S,_ as o,ab as w,c as k,e as b,f as d,fd as E,gb as C,ia as O,o as V}from"./chunk-TXKU6S6B.js";var y=class{};function F(r){return r&&typeof r.connect=="function"&&!(r instanceof b)}var l=(function(r){return r[r.REPLACED=0]="REPLACED",r[r.INSERTED=1]="INSERTED",r[r.MOVED=2]="MOVED",r[r.REMOVED=3]="REMOVED",r})(l||{}),B=new S("_ViewRepeater");var x=class{applyChanges(t,e,i,s,n){t.forEachOperation((a,c,f)=>{let h,u;if(a.previousIndex==null){let _=i(a,c,f);h=e.createEmbeddedView(_.templateRef,_.context,_.index),u=l.INSERTED}else f==null?(e.remove(c),u=l.REMOVED):(h=e.get(c),e.move(h,f),u=l.MOVED);n&&n({context:h?.context,operation:u,record:a})})}detach(){}};var A=20,qe=(()=>{class r{_ngZone=o(C);_platform=o(R);_renderer=o(v).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new d;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=A){return this._platform.isBrowser?new k(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let s=e>0?this._scrolled.pipe(p(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):V()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){let s=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(z(n=>!n||s.indexOf(n)>-1))}getAncestorScrollContainers(e){let i=[];return this.scrollContainers.forEach((s,n)=>{this._scrollableContainsElement(n,e)&&i.push(n)}),i}_scrollableContainsElement(e,i){let s=T(i),n=e.getElementRef().nativeElement;do if(s==n)return!0;while(s=s.parentElement);return!1}static \u0275fac=function(i){return new(i||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var I=20,Xe=(()=>{class r{_platform=o(R);_listeners;_viewportSize;_change=new d;_document=o(O);constructor(){let e=o(C),i=o(v).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let s=n=>this._change.next(n);this._listeners=[i.listen("window","resize",s),i.listen("window","orientationchange",s)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:i,height:s}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+s,right:e.left+i,height:s,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,i=this._getWindow(),s=e.documentElement,n=s.getBoundingClientRect(),a=-n.top||e.body.scrollTop||i.scrollY||s.scrollTop||0,c=-n.left||e.body.scrollLeft||i.scrollX||s.scrollLeft||0;return{top:a,left:c}}change(e=I){return e>0?this._change.pipe(p(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var M=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=w({type:r});static \u0275inj=m({})}return r})(),Ke=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=w({type:r});static \u0275inj=m({imports:[E,M,E,M]})}return r})();var D=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new d;constructor(t=!1,e,i=!0,s){this._multiple=t,this._emitChanges=i,this.compareWith=s,e&&e.length&&(t?e.forEach(n=>this._markSelected(n)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(i=>this._markSelected(i));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(i=>this._unmarkSelected(i));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);let e=this.selected,i=new Set(t.map(n=>this._getConcreteValue(n)));t.forEach(n=>this._markSelected(n)),e.filter(n=>!i.has(this._getConcreteValue(n,i))).forEach(n=>this._unmarkSelected(n));let s=this._hasQueuedChanges();return this._emitChangeEvent(),s}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();let e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){t.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(t,e){if(this.compareWith){e=e??this._selection;for(let i of e)if(this.compareWith(t,i))return i;return t}else return t}};export{y as a,F as b,l as c,B as d,x as e,qe as f,Xe as g,M as h,Ke as i,D as j};
